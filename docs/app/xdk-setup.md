---
title: Configurando a XDK
slug: /app/xdk-setup
---

Para configurar a XDK precisamos editar a propriedade `xdkConfig` no arquivo `src/app/app.module.ts` que inicia com a seguinte estrutura:

```ts title="/src/app/app.module.ts" showLineNumbers
const xdkConfig: IxCoreConfig = {
    baseUrl: environment.baseUrl,
    routes: routes,
    applicationName: 'gerenciamento-pacientes',
    security: {
        shouldUseAuthorizer: false,
        useIxOAuth: false,
        loginSyncRoute: 'login'
    }
};
```

Na maioria das situações não será necessário alterar nada nas linhas 2-4.

Segue exemplo de uma configuração:

```ts title="/src/app/app.module.ts" showLineNumbers
// ...
import packageLockJson from '../../package-lock.json';
// ...

const xdkConfig: IxCoreConfig = {
    baseUrl: environment.baseUrl,
    routes: routes,
    applicationName: 'gerenciamento-pacientes',
    applicationLogo: 'iVBORw0KGgo...',
    coreVersion: packageLockJson.dependencies['@itix/core'].version,
    security: {
        shouldUseAuthorizer: false,
        useIxOAuth: false,
        loginSyncRoute: 'login'
    },
    menu: {
        applicationsUrl: '',
        mainTitle: 'Unimed Goiânia',
        mainLogo: 'iVBORw0KGgo...',
        smallLogo: 'iVBORw0KGgo...'
    },
    layout: {
        showNotificationsButton: false,
        hideUserMenu: true
    }
};
```

## LISTA COM AS OPÇÕES DISPONÍVEIS PARA CONFIGURAÇÃO

| Propriedade                                                                | Descrição                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|----------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| baseUrl                                                                    | URL usada como base para montar todas as requisições HTTP da aplicação que usam o `RequestService`. Isso inclui requisições feitas diretamente usando o `RequestService/RequestModel`, bem como os `Stores`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| applicationName                                                            | Nome da aplicação.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| defaultApiVersion                                                          | Versão padrão da API, se houver. Se informada, será utilizada após o `/api`. Por exemplo, se informar "v2" na propriedade, as URLs serão montadas no padrão: `[baseUrl]/api/v2`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| defaultLoggedRoute                                                         | Rota padrão da aplicação após o login do usuário. Se informada, essa rota será usada para redirecionar o usuário sempre que ele fizer o login. <br/>**Valor padrão: "home".**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| coreVersion                                                                | Versão da biblioteca `@itix/core` instalada. Essa propriedade deve informar a versão de `@itix/core` para que possa ser exibida nos layouts da XDK.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| displayReportErrorButton                                                   | Indica se deve exibir o botão de reportar erro quando uma exceção é gerada no servidor. Sempre que uma exceção ocorre no servidor, o serviço de tratamento de erros irá exibir uma mensagem para o usuário. Se essa propriedade for marcada como verdadeira, um botão para reportar o erro será exibido junto com a mensagem da exceção. <br/> **Valor padrão: Falso.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| authService                                                                | Serviço de autenticação. Para personalizar todo o processo de autenticação. Deve-se criar um *provider* que estenda `AuthService` e informá-lo aqui. Se isso for feito, todo o processo de autenticação irá utilizar esse novo *provider*.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| loggerService                                                              | Serviço de logs. Para personalizar o processo de logs da aplicação. deve-se criar um *provider* que estenda `LoggerService` e informá-lo aqui.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| routes                                                                     | Rotas da aplicação. Utilizadas para criar e gerenciar o menu da aplicação.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span class="-red" class="-red">layout.showNotificationsButton</span>   | <span class="-red">Indica se deve exibir o botão de notificações nos layouts da XDK. <br/> **Valor padrão: Verdadeiro.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span class="-red">layout.hideUserMenu</span>              | <span class="-red">Indica se deve esconder o menu do usuário logado nos layouts da XDK. <br/> **Valor padrão: Falso.**</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span class="-yellow">menu.mainLogo</span>                | <span class="-yellow">Logo do menu principal. Essa propriedade espera receber uma string no padrão `Base64`. <br/> **Valor padrão: Logo padrão da ITIX.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span class="-yellow">menu.smallLogo</span>               | <span class="-yellow">Logo do menu principal quando contraído. Essa propriedade espera receber uma string no padrão `Base64`. <br/> **Valor padrão: Logo padrão no formato ícone da ITIX.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span class="-yellow">menu.loggedOutBackground</span>     | <span class="-yellow">Imagem de fundo da tela de logout. Essa propriedade espera receber uma string no padrão `Base64`. <br/> **Valor padrão: Imagem de fundo padrão da ITIX.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span class="-yellow">menu.mainTitle</span>               | <span class="-yellow">Título exibido no menu principal. <br/> **Valor padrão: "XDK".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span class="-yellow">menu.shouldStartExpanded</span>     | <span class="-yellow">Indica se o menu deve inicializar expandido. <br/> **Valor padrão: Verdadeiro.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span class="-blue">security.externalAuthUrl</span>          | <span class="-blue">URL do serviço externo de autenticação. Deve ser informada quando estiver utilizando um serviço de autenticação externo. Neste caso, a requisição de login do usuário fará um POST nessa URL informada enviando o nome de usuário e senha informados pelo usuário na hora do login. Esse *endpoint* deve retornar o *token* como propriedade de um objeto. Exemplo de retorno: `{ token: "tokenJWT" }`.</span>                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span class="-blue">security.ixOAuthLoginUrl</span>          | <span class="-blue">*Endpoint* para iniciar o processo de login quando usando OAuth da ITIX. Concatena esse valor à URL base (`baseUrl`) para fazer a requisição ao backend que redireciona para o OAuth da ITIX. <br/> **Valor padrão: "/oauth/connect".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span class="-blue">security.ixOAuthAdminUrl</span>          | <span class="-blue">*Endpoint* da administração de segurança quando usando OAuth da ITIX. Concatena esse valor à URL base (`baseUrl`) para fazer a requisição ao backend que redireciona para o OAuth da ITIX. <br/> **Valor padrão: "/oauth/admin".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span class="-blue">security.ixOAuthUserInfoUrl</span>       | <span class="-blue">*Endpoint* para obter os dados do usuário quando usando OAuth da ITIX. Concatena esse valor à URL base (`baseUrl`) para fazer a requisição ao backend que redireciona para o OAuth da ITIX. <br/> **Valor padrão: "/oauth/user-info".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span class="-blue">security.adminAccessClaim</span>         | <span class="-blue">Claim/Role que será utilizado para validar se o usuário é administrador. <br/> **Valor padrão: "admin".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span class="-blue">security.passwordChangePath</span>       | <span class="-blue">Endereço da troca de senha da aplicação ("change-password", "auth/change-password", etc.). Esse é o endereço da aplicação *frontend* que é chamado sempre que o usuário solicitar a troca de senha. <br/> **Valor padrão: "change-password".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span class="-blue">security.passwordChangeServerPath</span> | <span class="-blue">Endereço da troca de senha do *backend*. Esse é o endereço do *backend* que é chamado sempre que o usuário solicitar a troca de senha. <br/> **Valor padrão: "change-password".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span class="-blue">security.shouldUseAuthorizer</span>      | <span class="-blue">Indica se deve utilizar um autorizador para fazer a autenticação. <br/> <ul><li>Deve ser verdadeiro sempre que o login for realizado por uma entidade autorizadora (interna ou externa). </li><li>Deve ser verdadeiro sempre que `security.externalAuthUrl` for informado.</li><li>Se for verdadeiro e `security.externalAuthUrl` não for informado, o login será feito usando a URL base (`baseUrl`) concatenada com "auth", se `useCookieAuth` for verdadeiro. Se `useCookieAuth` for falso, irá usar "token" em vez de "auth". Neste caso, a requisição de login do usuário fará um POST nessa URL enviando o nome de usuário e senha informados pelo usuário na hora do login. Esse *endpoint* deve retornar o *token* como propriedade de um objeto. Exemplo de retorno: `{ token: "tokenJWT" }`.</li></ul> <br/> **Valor padrão: Falso.** </span> |
| <span class="-blue">security.useCookieAuth</span>            | <span class="-blue">Indica se a aplicação usa cookies para realizar a autenticação das requisições. <br/> **Valor padrão: Falso.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span class="-blue">security.useIxOAuth</span>               | <span class="-blue">Indica se deve usar o OAuth da ITIX para realizar a autenticação das requisições. <br/> **Valor padrão: Falso.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span class="-blue">security.getClaimsFromToken</span>       | <span class="-blue">Indica se deve obter as claims/roles diretamente do *token* JWT. Caso contrário, irá obter as claims/roles do endereço informado em `security.ixOAuthUserInfoUrl`. Obter as claims do *token* pode ser muito vantajoso pensando numa economia de requisições, mas há casos em que a quantidade de claims/roles do usuário se torna um impeditivo para a utilização desse método. Nesses casos, o recomendado é manter essa propriedade falsa e obter as claims/roles do endereço em `security.ixOAuthUserInfoUrl`. Usado apenas quando `security.useIxOAuth` for verdadeiro. <br/><br/> <blockquote>Se a quantidade de claims/roles não for muito grande, recomendamos definir essa propriedade como verdadeira.</blockquote> <br/> **Valor padrão: Falso.** </span>                                                                                    |
| <span class="-blue">security.openPagesInNewWindow</span>     | <span class="-blue">Indica se deve abrir as telas de segurança (como troca de senha e administração da segurança) em uma nova aba/janela. <br/> **Valor padrão: Falso.** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span class="-blue">security.loginRoute</span>               | <span class="-blue">Rota para logar o usuário. Esta rota é da aplicação *frontend* que indica em qual endereço encontrar a tela de login. <br/> **Valor padrão: "login".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span class="-blue">security.loginSyncRoute</span>           | <span class="-blue">Rota para verificar se o usuário está logado (autenticação por cookies). Quando a autenticação for feita através de cookies, é necessário uma página para validar se o usuário está válido. A rota dessa página deve ser informada aqui. <br/> **Valor padrão: "auth-sync".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span class="-blue">security.loggedOutRoute</span>           | <span class="-blue">Rota padrão da aplicação após o logout do usuário. O usuário será sempre redirecionado para essa rota quando realizar o logout. <br/> **Valor padrão: "account/logged-out".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span class="-blue">security.unauthorizedRoute</span>        | <span class="-blue">Rota padrão para usuários sem permissão. O usuário será redirecionado para essa rota quando não tiver permissão para acessar um recurso. <br/> **Valor padrão: "account/unauthorized".** </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span class="-blue">security.securityStorage</span>          | <span class="-blue">Armazenamento dos dados de segurança. Se desejar modificar a maneira de armazenamento dos dados de segurança do usuário, deve-se criar um *provider* que estenda `SecurityStorage` e informá-lo aqui. Se isso for feito, todo o processo de armazenamento dos dados de segurança irá utilizar esse novo *provider*. </span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span class="-blue">security.setupTokenRequest</span>        | <span class="-blue">Gera um `RequestModel` que será enviado para realizar a autenticação e obter o *token* do usuário. Quando for necessário configurar em detalhes o processo de login, deve-se informar essa propriedade. Essa propriedade recebe uma função com a seguinte assinatura: `(username: string, password: string): RequestModel`. <br/><br/> Exemplo de utilização: <br/> <pre><code>setupTokenRequest: (username, password) => <br/>    new RequestModel({<br/>        url: 'sua_url',<br/>        isAbsolute: true,<br/>        data: { username, password }<br/>    })</code></pre> </span>                                                                                                                                                                                                                                                                |

